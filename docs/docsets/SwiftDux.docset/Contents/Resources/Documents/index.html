<!DOCTYPE html>
<html lang="en">
  <head>
    <title>SwiftDux  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="SwiftDux  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">SwiftDux Docs</a> (85% documented)</p>
        <p class="header-right"><a href="https://github.com/StevenLambion/SwiftDux"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">SwiftDux Reference</a>
        <img id="carat" src="img/carat.png" />
        SwiftDux  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Documentation.html">Documentation</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="installation.html">Installation</a>
              </li>
              <li class="nav-group-task">
                <a href="getting-started.html">Getting Started</a>
              </li>
              <li class="nav-group-task">
                <a href="composing-reducers.html">Composing Reducers</a>
              </li>
              <li class="nav-group-task">
                <a href="swiftui-list-support.html">SwiftUI List Support</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="State.html">State</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="State.html#/s:8SwiftDux9StateTypea">StateType</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/IdentifiableState.html">IdentifiableState</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/OrderedState.html">OrderedState</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Actions.html">Actions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Actions.html#/s:8SwiftDux6ActionP">Action</a>
              </li>
              <li class="nav-group-task">
                <a href="Actions.html#/s:8SwiftDux11EmptyActionV">EmptyAction</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ActionPlan.html">ActionPlan</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/PublishableActionPlan.html">PublishableActionPlan</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ActionDispatcher.html">ActionDispatcher</a>
              </li>
              <li class="nav-group-task">
                <a href="Actions.html#/s:8SwiftDux10SendActiona">SendAction</a>
              </li>
              <li class="nav-group-task">
                <a href="Actions.html#/s:8SwiftDux8GetStatea">GetState</a>
              </li>
              <li class="nav-group-task">
                <a href="Actions.html#/s:8SwiftDux14ActionModifiera">ActionModifier</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Store.html">Store</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/Store.html">Store</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Reducer.html">Reducer</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/StoreActionDispatcher.html">StoreActionDispatcher</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="SwiftUI.html">SwiftUI</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/View.html">View</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MappedState.html">MappedState</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Dispatcher.html">Dispatcher</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/StoreProvider.html">StoreProvider</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Extensions.html">Other Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/RangeReplaceableCollection.html">RangeReplaceableCollection</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Structs.html">Other Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/DispatchProxy.html">DispatchProxy</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/StateMapper.html">StateMapper</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='swiftdux' class='heading'>SwiftDux</h1>

<blockquote>
<p>Predictable state management for SwiftUI applications.</p>
</blockquote>

<p><a href="https://swift.org/"><img src="https://img.shields.io/badge/swift-5.1-orange.svg" alt="Swift Version"></a>
<img src="https://img.shields.io/badge/platforms-iOS%2013%20%7C%20macOS%2010.15%20%7C%20tvOS%2013%20%7C%20watchOS%206-222.svg" alt="Platform Versions">
<a href="LICENSE"><img src="https://img.shields.io/badge/License-MIT-blue.svg" alt="License"></a></p>

<p>This is still a work in progress.</p>
<h2 id='introduction' class='heading'>Introduction</h2>

<p>This is yet another redux inspired state management solution for swift. It&rsquo;s built on top of the Combine framework with hooks for SwiftUI. This library helps build applications around an <a href="https://guide.elm-lang.org/architecture/">elm-like archectiture</a> using a single, centralized state container. For more information about the architecture and this library, take a look at the <a href="https://stevenlambion.github.io/SwiftDux/getting-started.html">getting started guide</a>.</p>
<h3 id='why-another-library' class='heading'>Why another library?</h3>

<p>As someone expierienced with Rx, React and Redux, I was excited to see the introduction of SwiftUI and the Combine framework. After a couple of days, I noticed a lot of people asking questions about how best to architect their SwiftUI applications. I had already begun work on my own pet application, so I&rsquo;ve ripped out the <q>redux</q> portion and added it here as its own library in the hopes that it might help others.</p>

<p>There&rsquo;s more established libraries like <a href="https://github.com/ReSwift/ReSwift/blob/master/README.md#example-projects">ReSwift</a> which may provide more functionality. Due to previous ABI instabilities and how easy it is to implement in Swift, I&rsquo;ve always rolled my own.</p>
<h3 id='why-dux' class='heading'>Why dux?</h3>

<p><a href="https://github.com/erikras/ducks-modular-redux">Ducks</a> is an established and common way to organize your code into modules, so I thought it goes hand-in-hand with a library built around architecting an application. If you&rsquo;re new to tools like Redux and wonder how best to organize your files, ducks is a great option to begin with.</p>
<h2 id='documentation' class='heading'>Documentation</h2>

<p>Visit the <a href="https://stevenlambion.github.io/SwiftDux/getting-started.html">documentation</a> website.</p>
<h2 id='installation' class='heading'>Installation</h2>
<h3 id='xcode-11' class='heading'>Xcode 11</h3>

<p>Use the new swift package manager integration to include the libary.</p>
<h3 id='swift-package-manager' class='heading'>Swift Package Manager</h3>

<p>Include the library as a dependencies as shown below:</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">PackageDescription</span>

<span class="k">let</span> <span class="nv">package</span> <span class="o">=</span> <span class="kt">Package</span><span class="p">(</span>
  <span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
    <span class="o">.</span><span class="kt">Package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/StevenLambion/SwiftDux.git"</span><span class="p">,</span> <span class="nv">majorVersion</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">minor</span><span class="p">:</span> <span class="mi">6</span><span class="p">)</span>
  <span class="p">]</span>
<span class="p">)</span>
</code></pre>
<h2 id='swiftui-examples' class='heading'>SwiftUI Examples</h2>
<h3 id='adding-the-swiftdux-store-to-the-swiftui-environment' class='heading'>Adding the SwiftDux store to the SwiftUI environment:</h3>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">RootView</span> <span class="p">{</span>
  <span class="k">var</span> <span class="nv">store</span><span class="p">:</span> <span class="kt">Store</span><span class="o">&lt;</span><span class="kt">AppState</span><span class="o">&gt;</span>

  <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kt">BookListView</span><span class="p">()</span>
      <span class="o">.</span><span class="nf">mapState</span><span class="p">(</span><span class="nv">updateOn</span><span class="p">:</span> <span class="kt">BookAction</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="nv">state</span><span class="p">:</span> <span class="kt">AppState</span><span class="p">)</span> <span class="k">in</span> <span class="n">state</span><span class="o">.</span><span class="n">books</span> <span class="p">}</span>
      <span class="o">.</span><span class="nf">provideStore</span><span class="p">(</span><span class="n">store</span><span class="p">)</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre>
<h3 id='use-property-wrappers-to-inject-mapped-states-and-the-store-dispatcher' class='heading'>Use property wrappers to inject mapped states and the store dispatcher</h3>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">BookListView</span> <span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
  <span class="kd">@MappedState</span> <span class="k">var</span> <span class="nv">books</span><span class="p">:</span> <span class="kt">OrderedState</span><span class="o">&lt;</span><span class="kt">Book</span><span class="o">&gt;</span>
  <span class="kd">@Dispatcher</span> <span class="k">var</span> <span class="nv">send</span><span class="p">:</span> <span class="kt">SendAction</span>

  <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kt">List</span> <span class="p">{</span>
      <span class="kt">ForEach</span><span class="p">(</span><span class="n">books</span><span class="p">)</span> <span class="p">{</span> <span class="n">item</span> <span class="k">in</span>
        <span class="kt">BookRow</span><span class="p">(</span><span class="nv">item</span><span class="p">:</span> <span class="n">item</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="o">.</span><span class="n">onMove</span> <span class="p">{</span> <span class="nf">send</span><span class="p">(</span><span class="kt">BookAction</span><span class="o">.</span><span class="nf">moveBooks</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="nv">$0</span><span class="p">,</span> <span class="nv">to</span><span class="p">:</span> <span class="nv">$1</span><span class="p">))</span> <span class="p">}</span>
      <span class="o">.</span><span class="n">onDelete</span>  <span class="p">{</span> <span class="nf">send</span><span class="p">(</span><span class="kt">BookAction</span><span class="o">.</span><span class="nf">removeBooks</span><span class="p">(</span><span class="nv">at</span><span class="p">:</span> <span class="nv">$0</span><span class="p">))</span> <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='modify-actions-sent-from-child-views' class='heading'>Modify actions sent from child views</h3>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">AuthorView</span> <span class="p">{</span>
  <span class="kd">@MappedState</span> <span class="nv">author</span><span class="p">:</span> <span class="kt">AuthorState</span>

  <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kt">BookListView</span><span class="p">()</span>
      <span class="o">.</span><span class="nf">mapState</span><span class="p">(</span><span class="nv">updateOn</span><span class="p">:</span> <span class="kt">BookAction</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="nv">state</span><span class="p">:</span> <span class="kt">AuthorState</span><span class="p">)</span> <span class="k">in</span> <span class="n">state</span><span class="o">.</span><span class="n">books</span> <span class="p">}</span>
      <span class="o">.</span><span class="nf">modifyActions</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">modifyBookActions</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="kd">func</span> <span class="nf">modifyBookActions</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="kt">Action</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Action</span><span class="p">?</span> <span class="p">{</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nv">action</span> <span class="o">=</span> <span class="n">action</span> <span class="k">as?</span> <span class="kt">BookAction</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kt">AuthorAction</span><span class="o">.</span><span class="nf">routeBookAction</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="n">author</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">action</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre>
<h2 id='known-issues' class='heading'>Known Issues</h2>
<h4 id='onappear-doesn-39-t-update-the-view-when-dispatching-actions' class='heading'>onAppear() doesn&rsquo;t update the view when dispatching actions</h4>

<p>The built-in onAppear method does not trigger a view update. Use the provided onAppearAsync() instead.</p>
<h4 id='mappedstate-fails-to-find-its-state' class='heading'>@MappedState fails to find its state</h4>

<p>Make sure the mapState() method is called in the correct environment scope. For example, a NavigationButton&rsquo;s destination is not in the same scope as the current content of the NavigationView even though the Button is declared inside it. To fix this, call the mapState() method directly on the NavigationView.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2019 <a class="link" href="" target="_blank" rel="external"></a>. All rights reserved. (Last updated: 2019-06-22)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.6</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
